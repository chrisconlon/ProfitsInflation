# ProfitsInflation

Replication package for "Did Profits Cause Inflation?"

This repository contains Python code to replicate the analysis examining whether corporate profit growth drove post-pandemic inflation. The code downloads official government data, computes factor-share decompositions, and produces publication-quality charts and tables.

---

## Repository structure

```
ProfitsInflation/
├── config.ini.example           # API key template — copy to config.ini and fill in
├── requirements.txt             # Python dependencies
├── code/
│   ├── 1_cpi_vs_ppi.ipynb      # CPI vs. PPI price comparison (uses BLS API)
│   └── 2_NIPA Tables.ipynb     # NIPA factor-share decomposition (uses BEA data)
├── raw_data/
│   └── markup_price_index.csv  # Markup and price indices (Alvarez-Blaser et al., 2025)
├── proc_data/
│   └── ppi.csv                 # Processed BLS data (generated by notebook 1)
└── tables_and_figures/         # Output figures (.pdf, .png) and LaTeX tables (.tex)
```

---

## Setup

### 1. Clone the repository

```bash
git clone <repo-url>
cd ProfitsInflation
```

### 2. Create a virtual environment and install dependencies

```bash
python -m venv venv
source venv/bin/activate        # macOS / Linux
# venv\Scripts\activate         # Windows

pip install -r requirements.txt
```

Requires **Python 3.10+**.

### 3. Configure your API key

The BLS data download (notebook 1) requires a free API key from the Bureau of Labor Statistics.

1. Register at <https://data.bls.gov/registrationEngine/>
2. Copy the template config file:
   ```bash
   cp config.ini.example config.ini
   ```
3. Open `config.ini` and replace `YOUR_BLS_API_KEY_HERE` with your key.

> `config.ini` is listed in `.gitignore` and will never be committed.

Notebook 2 (BEA / NIPA data) does **not** require an API key — the data is downloaded directly from a public BEA URL.

---

## Running the notebooks

Launch JupyterLab from the project root:

```bash
jupyter lab
```

Run the notebooks **in order** from the `code/` directory:

| Notebook | Description | Output |
|----------|-------------|--------|
| `1_cpi_vs_ppi.ipynb` | Downloads PPI and CPI series from BLS, computes year-over-year changes, generates price comparison figures | `proc_data/ppi.csv`, `tables_and_figures/cpi_vs_ppi.pdf`, `ppi_groundwork.pdf`, `ppi_trade_services.pdf`, `ppi_food.pdf` |
| `2_NIPA Tables.ipynb` | Downloads NIPA Table 1.15 from BEA, decomposes value-added growth into factor shares (labor, capital, profits, taxes) | `tables_and_figures/greedflation_bars.pdf`, `price_weights.pdf`, `profit_weights.pdf`, `nipa_table_115.tex`, `nipa_factor_shares.tex` |

All output paths are relative to the notebook location — notebooks are designed to be run from the `code/` directory.

---

## Data sources

| Source | Data | Access |
|--------|------|--------|
| [Bureau of Labor Statistics (BLS)](https://www.bls.gov/) | Producer Price Index (PPI), Consumer Price Index (CPI) | Free API — key required (see Setup) |
| [Bureau of Economic Analysis (BEA)](https://www.bea.gov/) | NIPA Table 1.15 — Value Added by Sector | Public download — no key required |
| Alvarez-Blaser et al. (2025) | Retail markup and price indices | Included in `raw_data/markup_price_index.csv` |

---

## Notes on reproducibility

- **BLS data**: The API call in notebook 1 fetches data for 2011–2025. Results will update automatically as BEA and BLS release new data. Pin the `endyear` parameter if you need a fixed snapshot.
- **BEA data**: Notebook 2 reads directly from the BEA's public Excel file URL. The `iloc[:, -26:]` column slice selects the 26 most recent quarters; this will shift as new quarters are released.
- **Paths**: All file paths use Python's `pathlib.Path` with relative references (e.g., `Path('../proc_data/')`), so the code works on macOS, Linux, and Windows.
